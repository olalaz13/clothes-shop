<!-- Hero -->
<header class="hero">
    <div>
        <h1 class="title">New arrivals — Summer collection</h1>
        <p>Minimal, high-quality clothes designed for comfort. Browse our selection and use "Quick view" to inspect
            items.</p>
        <div class="cta">
            <a [routerLink]="['/shop']" style="background-color: #ff6b6b;" class="btn primary">Shop now</a>
            <a [routerLink]="['/about']" class="btn btn-outline-primary d-flex align-items-center text-dark">
                Learn more
            </a>
        </div>
    </div>

    <aside>
            <div class="card hero-card">
                <!-- chu -->
                <h4 class="text-center m-0">Best Selling Products</h4>
                <!-- Carousel -->
                <div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel">

                    <!-- Indicators -->
                    <div class="carousel-indicators">
                        <button type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide-to="0"
                            class="active" aria-current="true" aria-label="Slide 1"></button>
                        <button type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide-to="1"
                            aria-label="Slide 2"></button>
                        <button type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide-to="2"
                            aria-label="Slide 3"></button>
                    </div>

                    <div class="carousel-inner">
                        <!-- Slide 1 -->
                        <div class="carousel-item active">
                            <img src="img/assets_task_01k5zjz5gze0xaf00smjmrrtdj_1758775483_img_0.webp"
                                class="d-block w-100" alt="Denim Jacket">
                            <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded p-2">
                                <h5>Denim Jacket</h5>
                                <p style="color: blanchedalmond;">Áo khoác jean cá tính, dễ phối với mọi loại trang
                                    phục.</p>
                            </div>
                        </div>
                        <!-- Slide 2 -->
                        <div class="carousel-item">
                            <img src="https://images.unsplash.com/photo-1512436991641-6745cdb1723f?q=80&w=1200&auto=format&fit=crop"
                                class="d-block w-100" alt="Classic Tee">
                            <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded p-2">
                                <h5>Classic Tee</h5>
                                <p style="color: blanchedalmond;">Áo thun cotton thoáng mát, phong cách trẻ trung cho
                                    mùa hè.</p>
                            </div>
                        </div>
                        <!-- Slide 3 -->
                        <div class="carousel-item">
                            <img src="img/assets_task_01k5zjxr1qfpaahfypmq9tgb5h_1758775432_img_0.webp"
                                class="d-block w-100" alt="Hooded Sweatshirt">
                            <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded p-2">
                                <h5>Hooded Sweatshirt</h5>
                                <p style="color: blanchedalmond;">Áo hoodie ấm áp, phù hợp cho những buổi đi chơi hoặc
                                    tập thể thao.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Controls -->
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying"
                        data-bs-slide="prev">
                        <span class="carousel-control-prev-icon"
                            style="background-color:rgb(122, 120, 120); border-radius:50%;" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying"
                        data-bs-slide="next">
                        <span class="carousel-control-next-icon"
                            style="background-color:rgb(122, 120, 120); border-radius:50%;" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>

                </div>
            </div>
        </aside>

</header>

<!-- Main Grid -->
<main class="grid-wrap">
    <div class="grid-header">
        <div><strong>New products</strong> <span class="muted" id="countTxt"> — {{getProductCount()}} items</span></div>
        <div class="row d-inline">
            <div class="muted text-center">Sort</div>
            <select id="sort" [(ngModel)]="sortBy" (change)="onSortChange()">
                <option value="popular">Most popular</option>
                <option value="asc">Price: low → high</option>
                <option value="desc">Price: high → low</option>
            </select>
        </div>
    </div>
    
    <div class="cats" id="categories">
        <button *ngFor="let category of categories" 
                class="chip" 
                [class.active]="category === activeCategory"
                (click)="onCategoryChange(category)">
            {{category}}
        </button>
    </div>
    
    <div class="grid" id="grid">
        <div class="card" *ngFor="let product of filteredProducts">
            <div class="thumb" [style.backgroundImage]="'url(' + product.img + ')'" 
                 role="img" [attr.aria-label]="product.title"></div>
            <div>
                <div style="display:flex;justify-content:space-between;align-items:center">
                    <div>
                        <div style="font-weight:700">{{product.title}}</div>
                        <div class="muted" style="font-size:13px">{{product.cat}}</div>
                    </div>
                    <div class="price">${{product.price}}</div>
                </div>
                <div style="margin-top:8px;display:flex;justify-content:space-between;align-items:center">
                    <div class="muted" style="font-size:13px">Quick view for details</div>
                    <div class="actions">
                        <button class="outline" (click)="quickView(product)">Quick view</button>
                        <button class="add" style="background-color: #ff6b6b;" (click)="addToCart(product)">Add</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="text-center mt-4">
    <a [routerLink]="['/shop']" style="font-size: 17px;background-color: rgb(72, 72, 253);" class="btn btn-primary">
            More
        </a>
    </div>
</main>

<!-- Quick view modal -->
<div class="modal open" id="modal" *ngIf="selectedProduct">
    <div class="modal-card">
        <div>
            <div class="m-thumb" id="mThumb" 
                 [style.backgroundImage]="'url(' + selectedProduct.img + ')'"></div>
        </div>
        <div>
            <div style="display:flex;justify-content:space-between;align-items:start;">
                <div>
                    <h2 id="mTitle" style="margin:0">{{selectedProduct.title}}</h2>
                    <div class="muted" id="mCat">{{selectedProduct.cat}}</div>
                </div>
                <div><button class="close-btn" (click)="closeModal()">✕</button></div>
            </div>
            <div style="margin-top:12px">
                <div id="mPrice" style="font-weight:800;font-size:20px">${{selectedProduct.price}}</div>
                <p id="mDesc" class="muted">{{selectedProduct.desc}}</p>
            </div>
            <div class="modal-option" style="margin-top:18px;display:flex;gap:8px">
                <div class="dropdown" id="sizeDropdown">
                    <select id="sizeSelect" class="form-select">
                        <option>Size S</option>
                        <option>Size M</option>
                        <option>Size L</option>
                    </select>
                </div>
                <button class="add" style="background-color: rgb(251, 165, 179);" (click)="addToCart(selectedProduct)">Add to cart</button>
                <button class="outline" id="favBtn">❤ Favorite</button>
            </div>
        </div>
    </div>
</div>